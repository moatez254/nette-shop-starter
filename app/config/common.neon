parameters:
    db:
        dsn: %env.DB_DSN%     # مثال: sqlite:%appDir%/../var/database.sqlite
        user: %env.DB_USER%   # فارغ مع SQLite
        pass: %env.DB_PASS%

services:
    # اتصال وقارئ قاعدة البيانات
    database.connection:
        factory: Nette\Database\Connection(%db.dsn%, %db.user%, %db.pass%)

    database.explorer:
        factory: Nette\Database\Explorer(
            @database.connection,
            new Nette\Database\Structure(@database.connection),
            new Nette\Caching\Storages\DevNullStorage
        )

    - App\Model\ProductRepository(@database.explorer)

    # Presenters
    - App\Presenters\ApiPresenter

    # 👈 الأهم: تسجيل الراوتر كخدمة اسمها router
    router:
        factory: [App\Router\RouterFactory, create]

application:
    errorPresenter: Error
    mapping:
        *: App\Presenters\*Presenter
