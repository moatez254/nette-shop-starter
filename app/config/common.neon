parameters:
    db:
        dsn: %env.DB_DSN%     # مثال: sqlite:%appDir%/../var/database.sqlite
        user: %env.DB_USER%   # فارغ مع SQLite
        pass: %env.DB_PASS%

services:
    # Database connection and explorer
    database.connection:
        factory: Nette\Database\Connection(%db.dsn%, %db.user%, %db.pass%)

    database.explorer:
        factory: Nette\Database\Explorer(
            @database.connection,
            new Nette\Database\Structure(@database.connection),
            new Nette\Caching\Storages\DevNullStorage
        )

    # Repository layer
    - App\Model\ProductRepository(@database.explorer)

    # Validation layer
    - App\Validator\ProductValidator

    # Service layer
    - App\Service\ProductService

    # Presenters
    - App\Presenters\ApiPresenter
    - App\Presenters\HealthPresenter

    # Router service
    router:
        factory: [App\Router\RouterFactory, create]

application:
    errorPresenter: Error
    mapping:
        *: App\Presenters\*Presenter
